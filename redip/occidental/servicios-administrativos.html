<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seleccionar Servicio Administrativo - REDIP OCCIDENTAL</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <div class="vector-bg">
        <div class="vector-circle"></div>
        <div class="vector-circle"></div>
        <div class="vector-circle"></div>
        <div class="vector-circle"></div>
        <div class="vector-line"></div>
        <div class="vector-line"></div>
    </div>
    <div id="container" class="container" style="max-width: 600px; padding: 50px;">
        <div class="logo-container">
            <img src="../../assets/img/LOGO-PNB.png" alt="Logo CPNB" class="logo-img">
            <h1 class="title">Seleccionar Servicio Administrativo</h1>
        </div>
        <div id="content">
            <p style="text-align: center; color: #4a5568; margin-bottom: 20px; font-size: 16px;">
                CCP: <strong id="ccpNombreDisplay"></strong>
            </p>
            <div class="input-group">
                <label for="servicioSelect">Seleccione Servicio Administrativo:</label>
                <select id="servicioSelect" required style="width:100%; padding:14px; border:2px solid #e2e8f0; border-radius:12px; font-size:16px;">
                    <option value="">-- Cargando servicios... --</option>
                </select>
            </div>
            <button id="btnCargarFormulario" class="action-btn" style="margin-top: 25px; padding: 14px; font-size: 16px; width: 100%;">
                üìù Cargar Formulario de Inspecci√≥n
            </button>
            <button id="btnVolver" class="back-btn" style="margin-top: 15px; padding: 10px 20px; width: 100%;">
                ‚Üê Volver a Opciones
            </button>
        </div>
    </div>
    <script>
        // Configuraci√≥n de Supabase (aunque no se usa tabla, se mantiene por consistencia)
        const supabaseUrl = 'https://ksczzvtgncvxfrmtvmll.supabase.co';
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtzY3p6dnRnbmN2eGZybXR2bWxsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NjMyMzcsImV4cCI6MjA3NDMzOTIzN30.AuWa3uaRylpXhz_VUh097k5tgNHuDllN8j-Hrktwzno';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

        // Par√°metros de URL
        const urlParams = new URLSearchParams(window.location.search);
        const ccpId = urlParams.get('ccpId');
        const ccpNombre = urlParams.get('ccpNombre');

        if (!ccpId || !ccpNombre) {
            alert('‚ö†Ô∏è Datos de CCP no v√°lidos.');
            window.history.back();
        }

        document.getElementById('ccpNombreDisplay').textContent = ccpNombre;

        // Lista de servicios administrativos
        const servicios = [
            "DIRECCION",
            "OPERACIONES",
            "SALA SITUACIONAL",
            "RECURSOS HUMANOS",
            "CAPTACION Y SELECCI√ìN",
            "GESTION COMUNICACIONAL",
            "CUADRANTES DE PAZ",
            "RESGUARDO DE INSTALACIONES",
            "PARQUE DE ARMAS",
            "OTIC",
            "ASESORIA",
            "ALEGACION",
            "SERVICIOS GENERALES",
            "LOGISTICA",
            "EDUCACION",
            "DERECHOS HUMANOS",
            "DPNNA",
            "DAVDAP",
            "EQUIDAD DE GENERO",
            "BIENESTAR SOCIAL",
            "SANIDAD POLICIAL",
            "PROTECCION A LAS COMUNIDADES INDIGENAS",
            "CENTRO DE FORMACION EDUCATIVO Y SOCIAL",
            "ATENCION INTEGRAL A LA MUJER",
            "DIRECCION DE SERVICIOS POLICIALES ESPECIALIZADOS",
            "PATRULLAJE VEHICULAR",
            "HOSPITALARIO",
            "AEROPORTUARIA",
            "TURISTICA",
            "AMBIENTAL",
            "DIPLOMATICA",
            "METRO",
            "UNIVERSIDAD LUZ",
            "SERVICIO PENITENCIARIO",
            "POLICIAL JUDICIAL",
            "ORDEN PUBLICO",
            "ATENCION Y PROTECCION A LA VICTIMA",
            "PROTECCION A LA VICTIMA",
            "POLICIA COMUNAL",
            "TRANSITO",
            "MIGRACION",
            "ESPACIOS ACUATICOS",
            "VEN 911/SIIPOL",
            "SERVICIO MOTORIZADO",
            "ICAP",
            "ORDP",
            "SERVICIO RURAL",
            "REDIP"
        ];

        // Cargar servicios en el select
        function cargarServicios() {
            const select = document.getElementById('servicioSelect');
            select.innerHTML = '<option value="">-- Elija un servicio --</option>';
            servicios.forEach(servicio => {
                const opt = document.createElement('option');
                opt.value = servicio;
                opt.textContent = servicio;
                select.appendChild(opt);
            });
            select.disabled = false;
        }

        // Inicializar
        cargarServicios();

        // Evento: Cargar formulario
        document.getElementById('btnCargarFormulario').addEventListener('click', () => {
            const servicioNombre = document.getElementById('servicioSelect').value;
            if (!servicioNombre) {
                alert('Por favor seleccione un servicio administrativo.');
                return;
            }
            // Redirigir al formulario de inspecci√≥n para servicios
            window.location.href = `formulario-servicio.html?ccpId=${encodeURIComponent(ccpId)}&ccpNombre=${encodeURIComponent(ccpNombre)}&servicioNombre=${encodeURIComponent(servicioNombre)}`;
        });

        // Evento: Volver
        document.getElementById('btnVolver').addEventListener('click', () => {
            window.history.back();
        });
    </script>
</body>
</html>
