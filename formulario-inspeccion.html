<div id="inspectionFormContainer">
    <div class="logo-container">
        <img src="https://raw.githubusercontent.com/Sistemasupervision/sistema-cpnb/main/iamagenes/LOGO-PNB.png" alt="Logo CPNB" class="logo-img">
        <h1 class="title">Inspección - <span id="selectedCcp">CCP</span></h1>
    </div>

    <form id="inspectionForm">
        <!-- Los ítems se generarán dinámicamente con JavaScript -->
    </form>

    <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button type="button" id="backToCcpBtn" class="back-btn">← Volver</button>
        <button type="submit" class="form-btn" style="flex: 1;">Guardar Inspección</button>
    </div>
</div>

<style>
    .inspection-item {
        margin-bottom: 20px;
        padding: 15px;
        background: #f8fafc;
        border-radius: 10px;
        border-left: 3px solid #3182ce;
    }
    .inspection-item label {
        display: block;
        font-weight: bold;
        color: #0c2440;
        margin-bottom: 8px;
    }
    .inspection-controls {
        display: flex;
        gap: 10px;
        align-items: center;
    }
    .inspection-controls select {
        padding: 8px 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
    }
    .inspection-controls input[type="text"] {
        flex: 1;
        padding: 8px 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        background-color: #edf2f7;
    }
    .inspection-controls input[type="text"]:disabled {
        background-color: #f8fafc;
        color: #a0aec0;
    }
    .form-btn {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #0c2440 0%, #1a365d 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 10px;
        box-shadow: 0 4px 15px rgba(12, 36, 64, 0.3);
    }
    .back-btn {
        background: linear-gradient(135deg, #2c5282 0%, #1a365d 100%);
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        color: white;
        cursor: pointer;
        font-weight: bold;
    }
</style>

<script>
// Ítems de inspección
const inspectionItems = [
    "baño dama", "baño caballero", "dormitorio femenina", "dormitorio masculino",
    "cocina", "comedor", "lavanderia", "oficina del jefe", "oficina de RRHH",
    "condiciones electricas", "fachada", "condiciones de pintura", "jardines",
    "condiciones genrales", "vehiculos", "motos"
];

// Generar formulario dinámicamente
function generateInspectionForm() {
    const form = document.getElementById('inspectionForm');
    form.innerHTML = '';

    inspectionItems.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'inspection-item';
        
        itemDiv.innerHTML = `
            <label>${item.charAt(0).toUpperCase() + item.slice(1)}</label>
            <div class="inspection-controls">
                <select class="status-select" data-item="${item}">
                    <option value="">Seleccionar</option>
                    <option value="si">Sí</option>
                    <option value="no">No</option>
                </select>
                <input type="text" class="observation-input" placeholder="Observaciones (opcional)" disabled>
            </div>
        `;
        
        form.appendChild(itemDiv);
    });

    // Añadir eventos a los selects
    document.querySelectorAll('.status-select').forEach(select => {
        select.addEventListener('change', function() {
            const input = this.closest('.inspection-controls').querySelector('.observation-input');
            if (this.value === 'si') {
                input.disabled = false;
                input.focus();
            } else {
                input.disabled = true;
                input.value = '';
            }
        });
    });
}

// Manejar envío del formulario
document.getElementById('inspectionForm').addEventListener('submit', function(e) {
    e.preventDefault();
    alert('¡Formulario de inspección guardado exitosamente!');
    // Aquí puedes agregar lógica para guardar en Supabase
});

// Generar el formulario al cargar
generateInspectionForm();
</script>
